(function(c){var h=function(a,b){var d=/[^\w\-\.:]/.test(a)?new Function(h.arg+",tmpl","var _e=tmpl.encode"+h.helper+",_s='"+a.replace(h.regexp,h.func)+"';return _s;"):h.cache[a]=h.cache[a]||h(h.load(a));return b?d(b,h):function(a){return d(a,h)}};h.cache={};h.load=function(a){return document.getElementById(a).innerHTML};h.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;h.func=function(a,b,d,c,f,g){if(b)return{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[b]||"\\"+b;
    if(d)return"="===d?"'+_e("+c+")+'":"'+("+c+"==null?'':"+c+")+'";if(f)return"';";if(g)return"_s+='"};h.encReg=/[<>&"'\x00]/g;h.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};h.encode=function(a){return(null==a?"":""+a).replace(h.encReg,function(a){return h.encMap[a]||""})};h.arg="o";h.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}";"function"===typeof define&&define.amd?define(function(){return h}):c.tmpl=h})(this);
(function(c){var h=c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype,a;if(a=c.Blob)try{a=!!new Blob}catch(n){a=!1}var b=a;if(a=b&&c.Uint8Array)try{a=100===(new Blob([new Uint8Array(100)])).size}catch(n){a=!1}var d=a,e=c.BlobBuilder||c.WebKitBlobBuilder||c.MozBlobBuilder||c.MSBlobBuilder,f=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,g=(b||e)&&c.atob&&c.ArrayBuffer&&c.Uint8Array&&function(a){var c;var g=a.match(f);if(!g)throw Error("invalid data URI");var h=g[2]?g[1]:"text/plain"+(g[3]||";charset=US-ASCII");
        var n=!!g[4];a=a.slice(g[0].length);a=n?atob(a):decodeURIComponent(a);n=new ArrayBuffer(a.length);g=new Uint8Array(n);for(c=0;c<a.length;c+=1)g[c]=a.charCodeAt(c);if(b)return new Blob([d?g:n],{type:h});a=new e;a.append(n);return a.getBlob(h)};c.HTMLCanvasElement&&!h.toBlob&&(h.mozGetAsFile?h.toBlob=function(a,b,d){d&&h.toDataURL&&g?a(g(this.toDataURL(b,d))):a(this.mozGetAsFile("blob",b))}:h.toDataURL&&g&&(h.toBlob=function(a,b,d){a(g(this.toDataURL(b,d)))}));"function"===typeof define&&define.amd?
    define(function(){return g}):c.dataURLtoBlob=g})(window);
(function(c){"function"===typeof define&&define.amd?define(["jquery","jquery-ui/widget"],c):"object"===typeof exports?c(require("jquery"),require("./vendor/jquery.ui.widget")):c(window.jQuery)})(function(c){function h(a){var b="dragover"===a;return function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var e=d.dataTransfer;e&&-1!==c.inArray("Files",e.types)&&!1!==this._trigger(a,c.Event(a,{delegatedEvent:d}))&&(d.preventDefault(),b&&(e.dropEffect="copy"))}}c.support.fileInput=!(/(Android (1\.[0156]|2\.[01]))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.[05]|3\.0))/.test(window.navigator.userAgent)||
c('<input type="file">').prop("disabled"));c.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader);c.support.xhrFormDataFileUpload=!!window.FormData;c.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);c.widget("blueimp.fileupload",{options:{dropZone:c(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,
    sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(a,b){a=this.messages[a]||a.toString();b&&c.each(b,function(b,c){a=a.replace("{"+b+"}",c)});return a},formData:function(a){return a.serializeArray()},add:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          b){if(a.isDefaultPrevented())return!1;(b.autoUpload||!1!==b.autoUpload&&c(this).fileupload("option","autoUpload"))&&b.process().done(function(){b.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:c.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.bitrate=
    this.loaded=0;this.getBitrate=function(a,b,d){var c=a-this.timestamp;if(!this.bitrate||!d||c>d)this.bitrate=1E3/c*(b-this.loaded)*8,this.loaded=b,this.timestamp=a;return this.bitrate}},_isXHRUpload:function(a){return!a.forceIframeTransport&&(!a.multipart&&c.support.xhrFileUpload||c.support.xhrFormDataFileUpload)},_getFormData:function(a){if("function"===c.type(a.formData))return a.formData(a.form);if(c.isArray(a.formData))return a.formData;if("object"===c.type(a.formData)){var b=[];c.each(a.formData,
    function(a,c){b.push({name:a,value:c})});return b}return[]},_getTotal:function(a){var b=0;c.each(a,function(a,c){b+=c.size||1});return b},_initProgressObject:function(a){var b={loaded:0,total:0,bitrate:0};a._progress?c.extend(a._progress,b):a._progress=b},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(a,b){if(a.lengthComputable){var d=Date.now?Date.now():(new Date).getTime();if(!(b._time&&
    b.progressInterval&&d-b._time<b.progressInterval&&a.loaded!==a.total)){b._time=d;var e=Math.floor(a.loaded/a.total*(b.chunkSize||b._progress.total))+(b.uploadedBytes||0);this._progress.loaded+=e-b._progress.loaded;this._progress.bitrate=this._bitrateTimer.getBitrate(d,this._progress.loaded,b.bitrateInterval);b._progress.loaded=b.loaded=e;b._progress.bitrate=b.bitrate=b._bitrateTimer.getBitrate(d,e,b.bitrateInterval);this._trigger("progress",c.Event("progress",{delegatedEvent:a}),b);this._trigger("progressall",
    c.Event("progressall",{delegatedEvent:a}),this._progress)}}},_initProgressListener:function(a){var b=this,d=a.xhr?a.xhr():c.ajaxSettings.xhr();d.upload&&(c(d.upload).bind("progress",function(d){var c=d.originalEvent;d.lengthComputable=c.lengthComputable;d.loaded=c.loaded;d.total=c.total;b._onProgress(d,a)}),a.xhr=function(){return d})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(a){var b=this,d=a.files[0],e=a.multipart||!c.support.xhrFileUpload,
    f="array"===c.type(a.paramName)?a.paramName[0]:a.paramName;a.headers=c.extend({},a.headers);a.contentRange&&(a.headers["Content-Range"]=a.contentRange);e&&!a.blob&&this._isInstanceOf("File",d)||(a.headers["Content-Disposition"]='attachment; filename="'+encodeURI(d.name)+'"');if(!e)a.contentType=d.type||"application/octet-stream",a.data=a.blob||d;else if(c.support.xhrFormDataFileUpload){if(a.postMessage){var g=this._getFormData(a);a.blob?g.push({name:f,value:a.blob}):c.each(a.files,function(b,d){g.push({name:"array"===
c.type(a.paramName)&&a.paramName[b]||f,value:d})})}else b._isInstanceOf("FormData",a.formData)?g=a.formData:(g=new FormData,c.each(this._getFormData(a),function(a,b){g.append(b.name,b.value)})),a.blob?g.append(f,a.blob,d.name):c.each(a.files,function(d,e){(b._isInstanceOf("File",e)||b._isInstanceOf("Blob",e))&&g.append("array"===c.type(a.paramName)&&a.paramName[d]||f,e,e.uploadName||e.name)});a.data=g}a.blob=null},_initIframeSettings:function(a){var b=c("<a></a>").prop("href",a.url).prop("host");
    a.dataType="iframe "+(a.dataType||"");a.formData=this._getFormData(a);a.redirect&&b&&b!==location.host&&a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(a){var b=c(a.fileInput),d=a.paramName;d?c.isArray(d)||(d=[d]):(d=[],b.each(function(){for(var a=
    c(this),b=a.prop("name")||"files[]",a=(a.prop("files")||[1]).length;a;)d.push(b),--a}),d.length||(d=[b.prop("name")||"files[]"]));return d},_initFormSettings:function(a){a.form&&a.form.length||(a.form=c(a.fileInput.prop("form")),a.form.length||(a.form=c(this.options.fileInput.prop("form"))));a.paramName=this._getParamName(a);a.url||(a.url=a.form.prop("action")||location.href);a.type=(a.type||"string"===c.type(a.form.prop("method"))&&a.form.prop("method")||"").toUpperCase();"POST"!==a.type&&"PUT"!==
a.type&&"PATCH"!==a.type&&(a.type="POST");a.formAcceptCharset||(a.formAcceptCharset=a.form.attr("accept-charset"))},_getAJAXSettings:function(a){a=c.extend({},this.options,a);this._initFormSettings(a);this._initDataSettings(a);return a},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(a,b,d){var e=c.Deferred(),f=e.promise();
    b=b||this.options.context||f;!0===a?e.resolveWith(b,d):!1===a&&e.rejectWith(b,d);f.abort=e.promise;return this._enhancePromise(f)},_addConvenienceMethods:function(a,b){var d=this,e=function(a){return c.Deferred().resolveWith(d,a).promise()};b.process=function(a,g){if(a||g)b._processQueue=this._processQueue=(this._processQueue||e([this])).then(function(){return b.errorThrown?c.Deferred().rejectWith(d,[b]).promise():e(arguments)}).then(a,g);return this._processQueue||e([this])};b.submit=function(){"pending"!==
this.state()&&(b.jqXHR=this.jqXHR=!1!==d._trigger("submit",c.Event("submit",{delegatedEvent:a}),this)&&d._onSend(a,this));return this.jqXHR||d._getXHRPromise()};b.abort=function(){if(this.jqXHR)return this.jqXHR.abort();this.errorThrown="abort";d._trigger("fail",null,this);return d._getXHRPromise(!1)};b.state=function(){if(this.jqXHR)return d._getDeferredState(this.jqXHR);if(this._processQueue)return d._getDeferredState(this._processQueue)};b.processing=function(){return!this.jqXHR&&this._processQueue&&
    "pending"===d._getDeferredState(this._processQueue)};b.progress=function(){return this._progress};b.response=function(){return this._response}},_getUploadedBytes:function(a){return(a=(a=(a=a.getResponseHeader("Range"))&&a.split("-"))&&1<a.length&&parseInt(a[1],10))&&a+1},_chunkedUpload:function(a,b){a.uploadedBytes=a.uploadedBytes||0;var d=this,e=a.files[0],f=e.size,g=a.uploadedBytes,h=a.maxChunkSize||f,k=this._blobSlice,l=c.Deferred(),q=l.promise(),m;if(!(this._isXHRUpload(a)&&k&&(g||h<f))||a.data)return!1;
    if(b)return!0;if(g>=f)return e.error=a.i18n("uploadedBytes"),this._getXHRPromise(!1,a.context,[null,"error",e.error]);var p=function(){var b=c.extend({},a),n=b._progress.loaded;b.blob=k.call(e,g,g+h,e.type);b.chunkSize=b.blob.size;b.contentRange="bytes "+g+"-"+(g+b.chunkSize-1)+"/"+f;d._initXHRData(b);d._initProgressListener(b);m=(!1!==d._trigger("chunksend",null,b)&&c.ajax(b)||d._getXHRPromise(!1,b.context)).done(function(e,h,k){g=d._getUploadedBytes(k)||g+b.chunkSize;n+b.chunkSize-b._progress.loaded&&
    d._onProgress(c.Event("progress",{lengthComputable:!0,loaded:g-b.uploadedBytes,total:g-b.uploadedBytes}),b);a.uploadedBytes=b.uploadedBytes=g;b.result=e;b.textStatus=h;b.jqXHR=k;d._trigger("chunkdone",null,b);d._trigger("chunkalways",null,b);g<f?p():l.resolveWith(b.context,[e,h,k])}).fail(function(a,c,e){b.jqXHR=a;b.textStatus=c;b.errorThrown=e;d._trigger("chunkfail",null,b);d._trigger("chunkalways",null,b);l.rejectWith(b.context,[a,c,e])})};this._enhancePromise(q);q.abort=function(){return m.abort()};
    p();return q},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(b);this._initProgressObject(b);b._progress.loaded=b.loaded=b.uploadedBytes||0;b._progress.total=b.total=this._getTotal(b.files)||1;b._progress.bitrate=b.bitrate=0;this._active+=1;this._progress.loaded+=b.loaded;this._progress.total+=b.total},_onDone:function(a,b,d,e){var f=e._progress.total,
    g=e._response;e._progress.loaded<f&&this._onProgress(c.Event("progress",{lengthComputable:!0,loaded:f,total:f}),e);g.result=e.result=a;g.textStatus=e.textStatus=b;g.jqXHR=e.jqXHR=d;this._trigger("done",null,e)},_onFail:function(a,b,d,c){var e=c._response;c.recalculateProgress&&(this._progress.loaded-=c._progress.loaded,this._progress.total-=c._progress.total);e.jqXHR=c.jqXHR=a;e.textStatus=c.textStatus=b;e.errorThrown=c.errorThrown=d;this._trigger("fail",null,c)},_onAlways:function(a,b,d,c){this._trigger("always",
    null,c)},_onSend:function(a,b){b.submit||this._addConvenienceMethods(a,b);var d=this,e,f,g=d._getAJAXSettings(b),h=function(){d._sending+=1;g._bitrateTimer=new d._BitrateTimer;return e=e||((f||!1===d._trigger("send",c.Event("send",{delegatedEvent:a}),g))&&d._getXHRPromise(!1,g.context,f)||d._chunkedUpload(g)||c.ajax(g)).done(function(a,b,c){d._onDone(a,b,c,g)}).fail(function(a,b,c){d._onFail(a,b,c,g)}).always(function(a,b,c){d._onAlways(a,b,c,g);--d._sending;--d._active;if(g.limitConcurrentUploads&&
        g.limitConcurrentUploads>d._sending)for(a=d._slots.shift();a;){if("pending"===d._getDeferredState(a)){a.resolve();break}a=d._slots.shift()}0===d._active&&d._trigger("stop")})};this._beforeSend(a,g);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(1<this.options.limitConcurrentUploads){var k=c.Deferred();this._slots.push(k);var l=k.then(h)}else l=this._sequence=this._sequence.then(h,h);l.abort=function(){f=[void 0,"abort",
    "abort"];return e?e.abort():(k&&k.rejectWith(g.context,f),h())};return this._enhancePromise(l)}return h()},_onAdd:function(a,b){var d=this,e=!0,f=c.extend({},this.options,b),g=b.files,h=g.length,k=f.limitMultiFileUploads,l=f.limitMultiFileUploadSize,q=f.limitMultiFileUploadSizeOverhead,m=0,p=this._getParamName(f),u=0;if(!h)return!1;l&&void 0===g[0].size&&(l=void 0);if((f.singleFileUploads||k||l)&&this._isXHRUpload(f))if(f.singleFileUploads||l||!k)if(!f.singleFileUploads&&l){var r=[];var t=[];for(f=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             0;f<h;f+=1)if(m+=g[f].size+q,f+1===h||m+g[f+1].size+q>l||k&&f+1-u>=k)r.push(g.slice(u,f+1)),m=p.slice(u,f+1),m.length||(m=p),t.push(m),u=f+1,m=0}else t=p;else for(r=[],t=[],f=0;f<h;f+=k)r.push(g.slice(f,f+k)),m=p.slice(f,f+k),m.length||(m=p),t.push(m);else r=[g],t=[p];b.originalFiles=g;c.each(r||g,function(g,f){var h=c.extend({},b);h.files=r?f:[f];h.paramName=t[g];d._initResponseObject(h);d._initProgressObject(h);d._addConvenienceMethods(a,h);return e=d._trigger("add",c.Event("add",{delegatedEvent:a}),
    h)});return e},_replaceFileInput:function(a){var b=a.fileInput,d=b.clone(!0),e=b.is(document.activeElement);a.fileInputClone=d;c("<form></form>").append(d)[0].reset();b.after(d).detach();e&&d.focus();c.cleanData(b.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(a,c){return c===b[0]?d[0]:c});b[0]===this.element[0]&&(this.element=d)},_handleFileTreeEntry:function(a,b){var d=this,e=c.Deferred(),f=[],g=function(b){b&&!b.entry&&(b.entry=a);e.resolve([b])},h=function(c){d._handleFileTreeEntries(c,
    b+a.name+"/").done(function(a){e.resolve(a)}).fail(g)},k=function(){l.readEntries(function(a){a.length?(f=f.concat(a),k()):h(f)},g)};b=b||"";if(a.isFile)a._file?(a._file.relativePath=b,e.resolve(a._file)):a.file(function(a){a.relativePath=b;e.resolve(a)},g);else if(a.isDirectory){var l=a.createReader();k()}else e.resolve([]);return e.promise()},_handleFileTreeEntries:function(a,b){var d=this;return c.when.apply(c,c.map(a,function(a){return d._handleFileTreeEntry(a,b)})).then(function(){return Array.prototype.concat.apply([],
    arguments)})},_getDroppedFiles:function(a){a=a||{};var b=a.items;return b&&b.length&&(b[0].webkitGetAsEntry||b[0].getAsEntry)?this._handleFileTreeEntries(c.map(b,function(a){var b;if(a.webkitGetAsEntry){if(b=a.webkitGetAsEntry())b._file=a.getAsFile();return b}return a.getAsEntry()})):c.Deferred().resolve(c.makeArray(a.files)).promise()},_getSingleFileInputFiles:function(a){a=c(a);var b=a.prop("webkitEntries")||a.prop("entries");if(b&&b.length)return this._handleFileTreeEntries(b);b=c.makeArray(a.prop("files"));
    if(b.length)void 0===b[0].name&&b[0].fileName&&c.each(b,function(a,b){b.name=b.fileName;b.size=b.fileSize});else{a=a.prop("value");if(!a)return c.Deferred().resolve([]).promise();b=[{name:a.replace(/^.*\\/,"")}]}return c.Deferred().resolve(b).promise()},_getFileInputFiles:function(a){return a instanceof c&&1!==a.length?c.when.apply(c,c.map(a,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(a)},_onChange:function(a){var b=
    this,d={fileInput:c(a.target),form:c(a.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e;b.options.replaceFileInput&&b._replaceFileInput(d);!1!==b._trigger("change",c.Event("change",{delegatedEvent:a}),d)&&b._onAdd(a,d)})},_onPaste:function(a){var b=a.originalEvent&&a.originalEvent.clipboardData&&a.originalEvent.clipboardData.items,d={files:[]};b&&b.length&&(c.each(b,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),!1!==this._trigger("paste",c.Event("paste",
    {delegatedEvent:a}),d)&&this._onAdd(a,d))},_onDrop:function(a){a.dataTransfer=a.originalEvent&&a.originalEvent.dataTransfer;var b=this,d=a.dataTransfer,e={};d&&d.files&&d.files.length&&(a.preventDefault(),this._getDroppedFiles(d).always(function(d){e.files=d;!1!==b._trigger("drop",c.Event("drop",{delegatedEvent:a}),e)&&b._onAdd(a,e)}))},_onDragOver:h("dragover"),_onDragEnter:h("dragenter"),_onDragLeave:h("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,
    {dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste}));c.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(a,b){var d=
    -1!==c.inArray(a,this._specialOptions);d&&this._destroyEventHandlers();this._super(a,b);d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var a=this.options;void 0===a.fileInput?a.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):a.fileInput instanceof c||(a.fileInput=c(a.fileInput));a.dropZone instanceof c||(a.dropZone=c(a.dropZone));a.pasteZone instanceof c||(a.pasteZone=c(a.pasteZone))},_getRegExp:function(a){a=
    a.split("/");var b=a.pop();a.shift();return new RegExp(a.join("/"),b)},_isRegExpOption:function(a,b){return"url"!==a&&"string"===c.type(b)&&/^\/.*\/[igm]{0,3}$/.test(b)},_initDataAttributes:function(){var a=this,b=this.options,d=this.element.data();c.each(this.element[0].attributes,function(c,f){var e=f.name.toLowerCase();if(/^data-/.test(e)){e=e.slice(5).replace(/-[a-z]/g,function(a){return a.charAt(1).toUpperCase()});var h=d[e];a._isRegExpOption(e,h)&&(h=a._getRegExp(h));b[e]=h}})},_create:function(){this._initDataAttributes();
    this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(a){var b=this;a&&!this.options.disabled&&(a.fileInput&&!a.files?this._getFileInputFiles(a.fileInput).always(function(c){a.files=c;b._onAdd(null,a)}):(a.files=c.makeArray(a.files),this._onAdd(null,a)))},send:function(a){if(a&&!this.options.disabled){if(a.fileInput&&
    !a.files){var b=this,d=c.Deferred(),e=d.promise(),f,g;e.abort=function(){g=!0;if(f)return f.abort();d.reject(null,"abort","abort");return e};this._getFileInputFiles(a.fileInput).always(function(c){g||(c.length?(a.files=c,f=b._onSend(null,a),f.then(function(a,b,c){d.resolve(a,b,c)},function(a,b,c){d.reject(a,b,c)})):d.reject())});return this._enhancePromise(e)}a.files=c.makeArray(a.files);if(a.files.length)return this._onSend(null,a)}return this._getXHRPromise(!1,a&&a.context)}})});
(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload"],c):"object"===typeof exports?c(require("jquery"),require("./jquery.fileupload")):c(window.jQuery)})(function(c){var h=c.blueimp.fileupload.prototype.options.add;c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{processQueue:[],add:function(a,b){var d=c(this);b.process(function(){return d.fileupload("process",b)});h.call(this,a,b)}},processActions:{},_processFile:function(a,b){var d=this,e=c.Deferred().resolveWith(d,
    [a]).promise();this._trigger("process",null,a);c.each(a.processQueue,function(a,g){var f=function(a){return b.errorThrown?c.Deferred().rejectWith(d,[b]).promise():d.processActions[g.action].call(d,a,g)};e=e.then(f,g.always&&f)});e.done(function(){d._trigger("processdone",null,a);d._trigger("processalways",null,a)}).fail(function(){d._trigger("processfail",null,a);d._trigger("processalways",null,a)});return e},_transformProcessQueue:function(a){var b=[];c.each(a.processQueue,function(){var d={},e=
    this.action,f=!0===this.prefix?e:this.prefix;c.each(this,function(b,e){"string"===c.type(e)&&"@"===e.charAt(0)?d[b]=a[e.slice(1)||(f?f+b.charAt(0).toUpperCase()+b.slice(1):b)]:d[b]=e});b.push(d)});a.processQueue=b},processing:function(){return this._processing},process:function(a){var b=this,d=c.extend({},this.options,a);d.processQueue&&d.processQueue.length&&(this._transformProcessQueue(d),0===this._processing&&this._trigger("processstart"),c.each(a.files,function(e){var f=e?c.extend({},d):d,g=function(){return a.errorThrown?
    c.Deferred().rejectWith(b,[a]).promise():b._processFile(f,a)};f.index=e;b._processing+=1;b._processingQueue=b._processingQueue.then(g,g).always(function(){--b._processing;0===b._processing&&b._trigger("processstop")})}));return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=c.Deferred().resolveWith(this).promise()}})});
(function(c){"function"===typeof define&&define.amd?define("jquery load-image load-image-meta load-image-exif canvas-to-blob ./jquery.fileupload-process".split(" "),c):"object"===typeof exports?c(require("jquery"),require("blueimp-load-image/js/load-image"),require("blueimp-load-image/js/load-image-meta"),require("blueimp-load-image/js/load-image-exif"),require("blueimp-canvas-to-blob"),require("./jquery.fileupload-process")):c(window.jQuery,window.loadImage)})(function(c,h){c.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",
    disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",
    disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1E7,
    imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(a,b){if(b.disabled)return a;var d=this,e=a.files[a.index],f=c.Deferred();return"number"===c.type(b.maxFileSize)&&e.size>b.maxFileSize||b.fileTypes&&!b.fileTypes.test(e.type)||!h(e,function(b){b.src&&(a.img=b);f.resolveWith(d,[a])},b)?a:f.promise()},resizeImage:function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     b){if(b.disabled||!a.canvas&&!a.img)return a;b=c.extend({canvas:!0},b);var d=this,e=c.Deferred(),f=b.canvas&&a.canvas||a.img,g=function(c){c&&(c.width!==f.width||c.height!==f.height||b.forceResize)&&(a[c.getContext?"canvas":"img"]=c);a.preview=c;e.resolveWith(d,[a])},n;if(a.exif){!0===b.orientation&&(b.orientation=a.exif.get("Orientation"));if(b.thumbnail&&(n=a.exif.get("Thumbnail")))return h(n,g,b),e.promise();a.orientation?delete b.orientation:a.orientation=b.orientation}return f?(g(h.scale(f,b)),
    e.promise()):a},saveImage:function(a,b){if(!a.canvas||b.disabled)return a;var d=this,e=a.files[a.index],f=c.Deferred();if(a.canvas.toBlob)a.canvas.toBlob(function(b){b.name||(e.type===b.type?b.name=e.name:e.name&&(b.name=e.name.replace(/\.\w+$/,"."+b.type.substr(6))));e.type!==b.type&&delete a.imageHead;a.files[a.index]=b;f.resolveWith(d,[a])},b.type||e.type,b.quality);else return a;return f.promise()},loadImageMetaData:function(a,b){if(b.disabled)return a;var d=this,e=c.Deferred();h.parseMetaData(a.files[a.index],
    function(b){c.extend(a,b);e.resolveWith(d,[a])},b);return e.promise()},saveImageMetaData:function(a,b){if(!(a.imageHead&&a.canvas&&a.canvas.toBlob)||b.disabled)return a;var c=a.files[a.index],e=new Blob([a.imageHead,this._blobSlice.call(c,20)],{type:c.type});e.name=c.name;a.files[a.index]=e;return a},setImage:function(a,b){a.preview&&!b.disabled&&(a.files[a.index][b.name||"preview"]=a.preview);return a},deleteImageReferences:function(a,b){b.disabled||(delete a.img,delete a.canvas,delete a.preview,
    delete a.imageHead);return a}}})});
(function(c){"function"===typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],c):"object"===typeof exports?c(require("jquery"),require("./jquery.fileupload-process")):c(window.jQuery)})(function(c){c.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{getNumberOfFiles:c.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",
    acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(h,a){if(a.disabled)return h;var b=c.Deferred(),d=this.options,e=h.files[h.index];if(a.minFileSize||a.maxFileSize)var f=e.size;"number"===c.type(a.maxNumberOfFiles)&&(d.getNumberOfFiles()||0)+h.files.length>a.maxNumberOfFiles?e.error=d.i18n("maxNumberOfFiles"):!a.acceptFileTypes||a.acceptFileTypes.test(e.type)||a.acceptFileTypes.test(e.name)?f>a.maxFileSize?e.error=
    d.i18n("maxFileSize"):"number"===c.type(f)&&f<a.minFileSize?e.error=d.i18n("minFileSize"):delete e.error:e.error=d.i18n("acceptFileTypes");e.error||h.files.error?(h.files.error=!0,b.rejectWith(this,[h])):b.resolveWith(this,[h]);return b.promise()}}})});
(function(c){"function"===typeof define&&define.amd?define("jquery blueimp-tmpl ./jquery.fileupload-image ./jquery.fileupload-audio ./jquery.fileupload-video ./jquery.fileupload-validate".split(" "),c):"object"===typeof exports?c(require("jquery"),require("blueimp-tmpl"),require("./jquery.fileupload-image"),require("./jquery.fileupload-video"),require("./jquery.fileupload-validate")):c(window.jQuery,window.tmpl)})(function(c,h){c.blueimp.fileupload.prototype._specialOptions.push("filesContainer",
    "uploadTemplateId","downloadTemplateId");c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(a){return a.result&&c.isArray(a.result.files)?a.result.files:[]},add:function(a,b){if(a.isDefaultPrevented())return!1;
    var d=c(this),e=d.data("blueimp-fileupload")||d.data("fileupload"),f=e.options;b.context=e._renderUpload(b.files).data("data",b).addClass("processing");f.filesContainer[f.prependFiles?"prepend":"append"](b.context);e._forceReflow(b.context);e._transition(b.context);b.process(function(){return d.fileupload("process",b)}).always(function(){b.context.each(function(a){c(this).find(".size").text(e._formatFileSize(b.files[a].size))}).removeClass("processing");e._renderPreviews(b)}).done(function(){b.context.find(".start").prop("disabled",
        !1);!1!==e._trigger("added",a,b)&&(f.autoUpload||b.autoUpload)&&!1!==b.autoUpload&&b.submit()}).fail(function(){b.files.error&&b.context.each(function(a){(a=b.files[a].error)&&c(this).find(".error").text(a)})})},send:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload");b.context&&b.dataType&&"iframe"===b.dataType.substr(0,6)&&b.context.find(".progress").addClass(!c.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width",
    "100%");return d._trigger("sent",a,b)},done:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e=(b.getFilesFromResponse||d.options.getFilesFromResponse)(b);if(b.context)b.context.each(function(h){var k=e[h]||{error:"Empty file upload result"};g=d._addFinishedDeferreds();d._transition(c(this)).done(function(){var e=c(this);f=d._renderDownload([k]).replaceAll(e);d._forceReflow(f);d._transition(f).done(function(){b.context=c(this);d._trigger("completed",
    a,b);d._trigger("finished",a,b);g.resolve()})})});else{var f=d._renderDownload(e)[d.options.prependFiles?"prependTo":"appendTo"](d.options.filesContainer);d._forceReflow(f);var g=d._addFinishedDeferreds();d._transition(f).done(function(){b.context=c(this);d._trigger("completed",a,b);d._trigger("finished",a,b);g.resolve()})}},fail:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e;if(b.context)b.context.each(function(g){if("abort"!==
    b.errorThrown){var h=b.files[g];h.error=h.error||b.errorThrown||b.i18n("unknownError");f=d._addFinishedDeferreds();d._transition(c(this)).done(function(){var g=c(this);e=d._renderDownload([h]).replaceAll(g);d._forceReflow(e);d._transition(e).done(function(){b.context=c(this);d._trigger("failed",a,b);d._trigger("finished",a,b);f.resolve()})})}else f=d._addFinishedDeferreds(),d._transition(c(this)).done(function(){c(this).remove();d._trigger("failed",a,b);d._trigger("finished",a,b);f.resolve()})});
else if("abort"!==b.errorThrown){b.context=d._renderUpload(b.files)[d.options.prependFiles?"prependTo":"appendTo"](d.options.filesContainer).data("data",b);d._forceReflow(b.context);var f=d._addFinishedDeferreds();d._transition(b.context).done(function(){b.context=c(this);d._trigger("failed",a,b);d._trigger("finished",a,b);f.resolve()})}else d._trigger("failed",a,b),d._trigger("finished",a,b),d._addFinishedDeferreds().resolve()},progress:function(a,b){if(a.isDefaultPrevented())return!1;var d=Math.floor(b.loaded/
    b.total*100);b.context&&b.context.each(function(){c(this).find(".progress").attr("aria-valuenow",d).children().first().css("width",d+"%")})},progressall:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this),e=Math.floor(b.loaded/b.total*100),f=d.find(".fileupload-progress"),g=f.find(".progress-extended");g.length&&g.html((d.data("blueimp-fileupload")||d.data("fileupload"))._renderExtendedProgress(b));f.find(".progress").attr("aria-valuenow",e).children().first().css("width",e+"%")},start:function(a){if(a.isDefaultPrevented())return!1;
    var b=c(this).data("blueimp-fileupload")||c(this).data("fileupload");b._resetFinishedDeferreds();b._transition(c(this).find(".fileupload-progress")).done(function(){b._trigger("started",a)})},stop:function(a){if(a.isDefaultPrevented())return!1;var b=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),d=b._addFinishedDeferreds();c.when.apply(c,b._getFinishedDeferreds()).done(function(){b._trigger("stopped",a)});b._transition(c(this).find(".fileupload-progress")).done(function(){c(this).find(".progress").attr("aria-valuenow",
    "0").children().first().css("width","0%");c(this).find(".progress-extended").html("&nbsp;");d.resolve()})},processstart:function(a){if(a.isDefaultPrevented())return!1;c(this).addClass("fileupload-processing")},processstop:function(a){if(a.isDefaultPrevented())return!1;c(this).removeClass("fileupload-processing")},destroy:function(a,b){if(a.isDefaultPrevented())return!1;var d=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),e=function(){d._transition(b.context).done(function(){c(this).remove();
    d._trigger("destroyed",a,b)})};b.url?(b.dataType=b.dataType||d.options.dataType,c.ajax(b).done(e).fail(function(){d._trigger("destroyfailed",a,b)})):e()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(a){a||(a=c.Deferred());this._finishedUploads.push(a);return a},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var a=c(this),b=a.prop("href"),d=a.prop("download");a.bind("dragstart",function(a){try{a.originalEvent.dataTransfer.setData("DownloadURL",
    ["application/octet-stream",d,b].join(":"))}catch(f){}})},_formatFileSize:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" GB":1E6<=a?(a/1E6).toFixed(2)+" MB":(a/1E3).toFixed(2)+" KB"},_formatBitrate:function(a){return"number"!==typeof a?"":1E9<=a?(a/1E9).toFixed(2)+" Gbit/s":1E6<=a?(a/1E6).toFixed(2)+" Mbit/s":1E3<=a?(a/1E3).toFixed(2)+" kbit/s":a.toFixed(2)+" bit/s"},_formatTime:function(a){var b=new Date(1E3*a);a=Math.floor(a/86400);return(a?a+"d ":"")+("0"+b.getUTCHours()).slice(-2)+
    ":"+("0"+b.getUTCMinutes()).slice(-2)+":"+("0"+b.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(100*a).toFixed(2)+" %"},_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+" | "+this._formatTime(8*(a.total-a.loaded)/a.bitrate)+" | "+this._formatPercentage(a.loaded/a.total)+" | "+this._formatFileSize(a.loaded)+" / "+this._formatFileSize(a.total)},_renderTemplate:function(a,b){if(!a)return c();var d=a({files:b,formatFileSize:this._formatFileSize,options:this.options});
    return d instanceof c?d:c(this.options.templatesContainer).html(d).children()},_renderPreviews:function(a){a.context.find(".preview").each(function(b,d){c(d).append(a.files[b].preview)})},_renderUpload:function(a){return this._renderTemplate(this.options.uploadTemplate,a)},_renderDownload:function(a){return this._renderTemplate(this.options.downloadTemplate,a).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(a){a.preventDefault();a=c(a.currentTarget);var b=a.closest(".template-upload").data("data");
    a.prop("disabled",!0);b&&b.submit&&b.submit()},_cancelHandler:function(a){a.preventDefault();var b=c(a.currentTarget).closest(".template-upload,.template-download"),d=b.data("data")||{};d.context=d.context||b;d.abort?d.abort():(d.errorThrown="abort",this._trigger("fail",a,d))},_deleteHandler:function(a){a.preventDefault();var b=c(a.currentTarget);this._trigger("destroy",a,c.extend({context:b.closest(".template-download"),type:"DELETE"},b.data()))},_forceReflow:function(a){return c.support.transition&&
    a.length&&a[0].offsetWidth},_transition:function(a){var b=c.Deferred();c.support.transition&&a.hasClass("fade")&&a.is(":visible")?a.bind(c.support.transition.end,function(d){d.target===a[0]&&(a.unbind(c.support.transition.end),b.resolveWith(a))}).toggleClass("in"):(a.toggleClass("in"),b.resolveWith(a));return b},_initButtonBarEventHandlers:function(){var a=this.element.find(".fileupload-buttonbar"),b=this.options.filesContainer;this._on(a.find(".start"),{click:function(a){a.preventDefault();b.find(".start").click()}});
    this._on(a.find(".cancel"),{click:function(a){a.preventDefault();b.find(".cancel").click()}});this._on(a.find(".delete"),{click:function(c){c.preventDefault();b.find(".toggle:checked").closest(".template-download").find(".delete").click();a.find(".toggle").prop("checked",!1)}});this._on(a.find(".toggle"),{change:function(a){b.find(".toggle").prop("checked",c(a.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),
    "click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",
    !1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var a=this.options;a.templatesContainer=this.document[0].createElement(a.filesContainer.prop("nodeName"));h&&(a.uploadTemplateId&&(a.uploadTemplate=h(a.uploadTemplateId)),a.downloadTemplateId&&(a.downloadTemplate=h(a.downloadTemplateId)))},_initFilesContainer:function(){var a=this.options;void 0===a.filesContainer?
    a.filesContainer=this.element.find(".files"):a.filesContainer instanceof c||(a.filesContainer=c(a.filesContainer))},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();c.support.fileInput||this._disableFileInputButton()},enable:function(){var a=!1;this.options.disabled&&(a=!0);this._super();a&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||
(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());this._super()}})});